{{- $data := slice -}}

{{- range .RegularPagesRecursive.ByWeight -}}
    {{- if and ( strings.Contains .RelPermalink "/test/" ) ( .Params.Weight ) -}}
        {{- $data = $data | append . -}}
    {{- end -}}
{{- end -}}

{{- return ( $data | len ) -}}