{{- $period := slice  -}}{{- range .Parent.Pages.ByWeight -}}{{- $period = $period | append .Page.Params.Period -}}{{- end -}}
{{- $unique := .Page.Params.Title | urlize -}}
{{- $curent := .Page.Params.Period -}}
{{- $active := "" }}
{{- $sesion := "" }}
  

<div class="flex center-x mb-20">
    <h2 class="font-light text-2xl mr-10"> Session {{.Page.Params.Period }} | </h2>
    <h1 class="font-light text-xl upper">Available Module</h1>
</div>
<div class="learnplan">
    {{- $allpage := .Parent.Pages -}}{{- $period := sort ( $period | uniq ) -}}
    {{- range $period -}}{{ $sesion = . -}}

    <div class="session">
        <div class="open-subdiv flex center-x">
            <h2 class="text-sm uppercase font-bold text-gray-400">Session {{$sesion }}</h2>
            <div class="icon md ml-a">{{ partial "icon/line/plus.svg" }}</div>
        </div>
        <div id="session-module-{{ $sesion }}" class="close">
            {{- range $allpage -}}{{- if  and (  eq .Page.Params.Weight $sesion  ) ( eq .Page.Params.Format.Type "material" ) -}}
            {{- if eq ( .Page.Params.Title | urlize ) $unique -}}
                {{- $active = "active" -}}
            {{- else -}}
                {{- $active = "" -}}
            {{- end -}}
            <a href="{{ .RelPermalink }}" class="flex center-x mb-10 info {{ $active }}" data-open="session-module-{{ $sesion }}">
                <div class="info">
                    <div class="name flex center-x">
                        <div class="icon lg">{{ partial "icon/line/folder.svg" }}</div>
                        <h3 class="capitalize text-md font-bold mb-15">{{ .LinkTitle }}</h3>
                    </div>
                    <p class="mt-00 text-gray-400">{{ .Page.Params.Lead }}</p>
                </div>
            </a>
            {{- end -}}{{- end -}}
        </div>
        <hr>
    </div>   
    {{- end -}}
</div>